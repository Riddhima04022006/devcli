<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Devcli: Helper Utilities</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Devcli
   </div>
   <div id="projectbrief">Low-Level Design Documentation for DevCLI Tool</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__helpers.html','',''); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
</script>
<div id="main-nav"></div>
<div id="container"><div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Helper Utilities </div></div>
</div><!--header-->
<div class="contents">

<p>Utility functions for string manipulation and command processing.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga408104dd64a2dd600c3927853484ddf7" id="r_ga408104dd64a2dd600c3927853484ddf7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga408104dd64a2dd600c3927853484ddf7">slice</a> (char *userInput, int start, int last)</td></tr>
<tr class="memdesc:ga408104dd64a2dd600c3927853484ddf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts a substring from the given input string based on start and end indices.  <br /></td></tr>
<tr class="memitem:gafa1c2b19990d1d340a6edc4fefcbd3e7" id="r_gafa1c2b19990d1d340a6edc4fefcbd3e7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafa1c2b19990d1d340a6edc4fefcbd3e7">replacePlaceholder</a> (char *input, char *val)</td></tr>
<tr class="memdesc:gafa1c2b19990d1d340a6edc4fefcbd3e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replaces placeholders in a command string with user-provided values.  <br /></td></tr>
<tr class="memitem:ga65bed1849cdeaf1d034b119cebfa50ba" id="r_ga65bed1849cdeaf1d034b119cebfa50ba"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga65bed1849cdeaf1d034b119cebfa50ba">wrap_for_shell</a> (char *command)</td></tr>
<tr class="memdesc:ga65bed1849cdeaf1d034b119cebfa50ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wraps a command for execution based on the detected shell environment.  <br /></td></tr>
<tr class="memitem:ga16e77a02e99d1690106464d9962cf0eb" id="r_ga16e77a02e99d1690106464d9962cf0eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga16e77a02e99d1690106464d9962cf0eb">isAdmin</a> ()</td></tr>
<tr class="memdesc:ga16e77a02e99d1690106464d9962cf0eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the current process has administrative privileges.  <br /></td></tr>
<tr class="memitem:gad2bea3d45682bbf307d24ef29c7eb95b" id="r_gad2bea3d45682bbf307d24ef29c7eb95b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad2bea3d45682bbf307d24ef29c7eb95b">checkAvailability</a> (char *foundAtPath, char *foundAtDrive, char *addFileToPath)</td></tr>
<tr class="memdesc:gad2bea3d45682bbf307d24ef29c7eb95b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a tool is already installed and handles PATH adjustments if necessary.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Utility functions for string manipulation and command processing. </p>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="gad2bea3d45682bbf307d24ef29c7eb95b" name="gad2bea3d45682bbf307d24ef29c7eb95b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad2bea3d45682bbf307d24ef29c7eb95b">&#9670;&#160;</a></span>checkAvailability()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int checkAvailability </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>foundAtPath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>foundAtDrive</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>addFileToPath</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a tool is already installed and handles PATH adjustments if necessary. </p>
<p>This function performs a series of checks for a given tool:</p><ol type="1">
<li>Executes <span class="tt">foundAtPath</span> to check if the tool is available in the system PATH.</li>
<li>If not found, executes <span class="tt">foundAtDrive</span> to check if the tool exists on disk.</li>
<li>If found on disk but not in PATH:<ul>
<li>On <b>Windows</b> → Adds the tool temporarily to PATH using <span class="tt">addFileToPath</span>.</li>
<li>On <b>Linux</b> → Extracts the tool directory and substitutes it into <span class="tt">addFileToPath</span>, then updates PATH temporarily.</li>
</ul>
</li>
<li>If not found in either location → Returns <span class="tt">1</span> to allow installation.</li>
</ol>
<p>The function dynamically wraps shell commands for execution using <span class="tt"><a class="el" href="#ga65bed1849cdeaf1d034b119cebfa50ba" title="Wraps a command for execution based on the detected shell environment.">wrap_for_shell()</a></span>. All allocated memory is freed within this function in the current implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">foundAtPath</td><td>Command to verify if the tool is in the PATH. </td></tr>
    <tr><td class="paramname">foundAtDrive</td><td>Command to check if the tool exists on disk (e.g., drive-specific path). </td></tr>
    <tr><td class="paramname">addFileToPath</td><td>Command template for temporarily adding the tool to the PATH, containing <span class="tt">{{path}}</span> as a placeholder for the resolved directory.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int<ul>
<li><span class="tt">0</span> → Tool found (either in PATH or added temporarily).</li>
<li><span class="tt">1</span> → Tool not found; installation should proceed.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is used only for <span class="tt">install.*</span> commands to prevent redundant installations and ensure tools can be executed immediately after detection.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Altering logic for PATH addition or placeholder handling without care may cause incorrect behavior or PATH corruption.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#gad2bea3d45682bbf307d24ef29c7eb95b">checkAvailability</a>(<span class="stringliteral">&quot;where tool&quot;</span>, <span class="stringliteral">&quot;dir tool_path&quot;</span>, <span class="stringliteral">&quot;set PATH={{path}};%PATH%&quot;</span>) == 1) {</div>
<div class="line">    <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Tool not found. Proceeding with installation.&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__helpers_html_gad2bea3d45682bbf307d24ef29c7eb95b"><div class="ttname"><a href="#gad2bea3d45682bbf307d24ef29c7eb95b">checkAvailability</a></div><div class="ttdeci">int checkAvailability(char *foundAtPath, char *foundAtDrive, char *addFileToPath)</div><div class="ttdoc">Checks if a tool is already installed and handles PATH adjustments if necessary.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00625">main.c:625</a></div></div>
<div class="ttc" id="amain_8c_html_ad285b8d43b6e90320e33e7438e3e171b"><div class="ttname"><a href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a></div><div class="ttdeci">#define LOG(msg,...)</div><div class="ttdoc">Prints a formatted log message with file name and line number.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00106">main.c:106</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00625">625</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  625</span>                                                                                 {</div>
<div class="line"><span class="lineno">  626</span>    <span class="keywordflow">if</span> (!foundAtPath || !foundAtDrive || !addFileToPath) {</div>
<div class="line"><span class="lineno">  627</span>        <a class="code hl_define" href="main_8c.html#ad9c73bc78b8b2564e47a037b5a6ca226">LOG_ERROR</a>(<span class="stringliteral">&quot;Invalid tool JSON definition. Required keys missing.&quot;</span>);</div>
<div class="line"><span class="lineno">  628</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  629</span>    }</div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordtype">char</span>* finalCommand=<a class="code hl_function" href="#ga65bed1849cdeaf1d034b119cebfa50ba">wrap_for_shell</a>(foundAtPath);</div>
<div class="line"><span class="lineno">  631</span>    <span class="keywordtype">int</span> status=system(finalCommand);</div>
<div class="line"><span class="lineno">  632</span>    free(finalCommand);</div>
<div class="line"><span class="lineno">  633</span>    <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Returned status: %d&quot;</span>, status);</div>
<div class="line"><span class="lineno">  634</span>    <span class="keywordflow">if</span>(status==0){</div>
<div class="line"><span class="lineno">  635</span>        <a class="code hl_define" href="main_8c.html#ad9c73bc78b8b2564e47a037b5a6ca226">LOG_ERROR</a>(<span class="stringliteral">&quot;File found at path. Terminating request.&quot;</span>);</div>
<div class="line"><span class="lineno">  636</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  637</span>    }</div>
<div class="line"><span class="lineno">  638</span>    <span class="keywordtype">char</span>* finalCommand1=<a class="code hl_function" href="#ga65bed1849cdeaf1d034b119cebfa50ba">wrap_for_shell</a>(foundAtDrive);</div>
<div class="line"><span class="lineno">  639</span>    <span class="keywordtype">int</span> status1=system(finalCommand1);</div>
<div class="line"><span class="lineno">  640</span>    free(finalCommand1);</div>
<div class="line"><span class="lineno">  641</span>    <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Returned status: %d&quot;</span>, status1);</div>
<div class="line"><span class="lineno">  642</span>    <span class="keywordflow">if</span>(status==1 &amp;&amp; status1==0){</div>
<div class="line"><span class="lineno">  643</span>        <span class="keywordflow">if</span>(strcmp(<a class="code hl_variable" href="main_8c.html#a0ef51f737fa5267b269e1c1ae5133ff0">shell</a>, <span class="stringliteral">&quot;Linux&quot;</span>) != 0){</div>
<div class="line"><span class="lineno">  644</span>            printf(<a class="code hl_define" href="main_8c.html#abf681265909adf3d3e8116c93c0ba179">YELLOW</a> <span class="stringliteral">&quot;Warning! You file is installed, but not added to path.\nAdding temporarily to path.\nKindly permanently add file to path also.&quot;</span> <a class="code hl_define" href="main_8c.html#ab702106cf3b3e96750b6845ded4e0299">RESET</a>);</div>
<div class="line"><span class="lineno">  645</span>            <span class="keywordtype">char</span>* finalCommand2 = <a class="code hl_function" href="#ga65bed1849cdeaf1d034b119cebfa50ba">wrap_for_shell</a>(addFileToPath);</div>
<div class="line"><span class="lineno">  646</span>            system(finalCommand2);</div>
<div class="line"><span class="lineno">  647</span>            free(finalCommand2);</div>
<div class="line"><span class="lineno">  648</span>            <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Tool path temporarily added.&quot;</span>);</div>
<div class="line"><span class="lineno">  649</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  650</span>        }</div>
<div class="line"><span class="lineno">  651</span>        <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  652</span>            FILE *fp = popen(foundAtDrive, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><span class="lineno">  653</span>            <span class="keywordflow">if</span> (!fp) {</div>
<div class="line"><span class="lineno">  654</span>                <a class="code hl_define" href="main_8c.html#ad9c73bc78b8b2564e47a037b5a6ca226">LOG_ERROR</a>(<span class="stringliteral">&quot;Failed to execute atDrive command.&quot;</span>);</div>
<div class="line"><span class="lineno">  655</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  656</span>            }</div>
<div class="line"><span class="lineno">  657</span>            <span class="keywordtype">char</span> path[512];</div>
<div class="line"><span class="lineno">  658</span>            <span class="keywordflow">if</span> (!fgets(path, <span class="keyword">sizeof</span>(path), fp)) {</div>
<div class="line"><span class="lineno">  659</span>                pclose(fp);</div>
<div class="line"><span class="lineno">  660</span>                <a class="code hl_define" href="main_8c.html#ad9c73bc78b8b2564e47a037b5a6ca226">LOG_ERROR</a>(<span class="stringliteral">&quot;Could not read path from atDrive command.&quot;</span>);</div>
<div class="line"><span class="lineno">  661</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  662</span>            }</div>
<div class="line"><span class="lineno">  663</span>            pclose(fp);</div>
<div class="line"><span class="lineno">  664</span>            <span class="keywordtype">char</span> *lastSlash = strrchr(path, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno">  665</span>            <span class="keywordflow">if</span> (lastSlash) *lastSlash = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  666</span>            path[strcspn(path, <span class="stringliteral">&quot;\n&quot;</span>)] = 0;</div>
<div class="line"><span class="lineno">  667</span>            <span class="keywordflow">if</span> (path[strlen(path)-1]==<span class="charliteral">&#39;/&#39;</span>) path[strlen(path)-1]=0;</div>
<div class="line"><span class="lineno">  668</span>            <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Found path: %s&quot;</span>, path);</div>
<div class="line"><span class="lineno">  669</span>            <span class="keywordtype">char</span> *buffer;</div>
<div class="line"><span class="lineno">  670</span>            <span class="keywordtype">char</span> *pos = strstr(addFileToPath, <span class="stringliteral">&quot;{{path}}&quot;</span>);</div>
<div class="line"><span class="lineno">  671</span>            <span class="keywordflow">if</span> (!pos){</div>
<div class="line"><span class="lineno">  672</span>                <a class="code hl_define" href="main_8c.html#ad9c73bc78b8b2564e47a037b5a6ca226">LOG_ERROR</a>(<span class="stringliteral">&quot;Placeholder {{path}} not found in addToPath.&quot;</span>);</div>
<div class="line"><span class="lineno">  673</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  674</span>            }</div>
<div class="line"><span class="lineno">  675</span>            <span class="keywordtype">size_t</span> new_len=strlen(addFileToPath) + strlen(path) + 10;</div>
<div class="line"><span class="lineno">  676</span>            buffer = (<span class="keywordtype">char</span> *)malloc(new_len*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));</div>
<div class="line"><span class="lineno">  677</span>            <span class="keywordflow">if</span> (!buffer){</div>
<div class="line"><span class="lineno">  678</span>                <a class="code hl_define" href="main_8c.html#ad9c73bc78b8b2564e47a037b5a6ca226">LOG_ERROR</a>(<span class="stringliteral">&quot;Dynamic Memory allocation failed.&quot;</span>);</div>
<div class="line"><span class="lineno">  679</span>                <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  680</span>            }</div>
<div class="line"><span class="lineno">  681</span>            <span class="keywordtype">size_t</span> prefix_len = pos - addFileToPath;</div>
<div class="line"><span class="lineno">  682</span>            snprintf(buffer, new_len, <span class="stringliteral">&quot;%.*s%s%s&quot;</span>, (<span class="keywordtype">int</span>)prefix_len, addFileToPath, path, pos+strlen(<span class="stringliteral">&quot;{{path}}&quot;</span>));</div>
<div class="line"><span class="lineno">  683</span>            system(buffer);</div>
<div class="line"><span class="lineno">  684</span>            free(buffer);</div>
<div class="line"><span class="lineno">  685</span>            <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Tool path temporarily added.&quot;</span>);</div>
<div class="line"><span class="lineno">  686</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  687</span>        }</div>
<div class="line"><span class="lineno">  688</span>    }</div>
<div class="line"><span class="lineno">  689</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  690</span>        <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;File not present in system. Running command.&quot;</span>);</div>
<div class="line"><span class="lineno">  691</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  692</span>    }</div>
<div class="line"><span class="lineno">  693</span>}</div>
<div class="ttc" id="agroup__helpers_html_ga65bed1849cdeaf1d034b119cebfa50ba"><div class="ttname"><a href="#ga65bed1849cdeaf1d034b119cebfa50ba">wrap_for_shell</a></div><div class="ttdeci">char * wrap_for_shell(char *command)</div><div class="ttdoc">Wraps a command for execution based on the detected shell environment.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00521">main.c:521</a></div></div>
<div class="ttc" id="amain_8c_html_a0ef51f737fa5267b269e1c1ae5133ff0"><div class="ttname"><a href="main_8c.html#a0ef51f737fa5267b269e1c1ae5133ff0">shell</a></div><div class="ttdeci">const char * shell</div><div class="ttdoc">Holds the name of the currently detected shell environment.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00133">main.c:133</a></div></div>
<div class="ttc" id="amain_8c_html_ab702106cf3b3e96750b6845ded4e0299"><div class="ttname"><a href="main_8c.html#ab702106cf3b3e96750b6845ded4e0299">RESET</a></div><div class="ttdeci">#define RESET</div><div class="ttdoc">ANSI escape code to reset text formatting to default.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00089">main.c:89</a></div></div>
<div class="ttc" id="amain_8c_html_abf681265909adf3d3e8116c93c0ba179"><div class="ttname"><a href="main_8c.html#abf681265909adf3d3e8116c93c0ba179">YELLOW</a></div><div class="ttdeci">#define YELLOW</div><div class="ttdoc">ANSI escape code for yellow-colored text.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00077">main.c:77</a></div></div>
<div class="ttc" id="amain_8c_html_ad9c73bc78b8b2564e47a037b5a6ca226"><div class="ttname"><a href="main_8c.html#ad9c73bc78b8b2564e47a037b5a6ca226">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(msg,...)</div><div class="ttdoc">Prints a formatted error message with file name and line number to stderr.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00123">main.c:123</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__helpers_gad2bea3d45682bbf307d24ef29c7eb95b_cgraph.png" border="0" usemap="#agroup__helpers_gad2bea3d45682bbf307d24ef29c7eb95b_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__helpers_gad2bea3d45682bbf307d24ef29c7eb95b_cgraph" id="agroup__helpers_gad2bea3d45682bbf307d24ef29c7eb95b_cgraph">
<area shape="rect" title="Checks if a tool is already installed and handles PATH adjustments if necessary." alt="" coords="5,5,125,32"/>
<area shape="rect" href="group__helpers.html#ga65bed1849cdeaf1d034b119cebfa50ba" title="Wraps a command for execution based on the detected shell environment." alt="" coords="173,5,278,32"/>
<area shape="poly" title=" " alt="" coords="125,16,157,16,157,21,125,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__helpers_gad2bea3d45682bbf307d24ef29c7eb95b_icgraph.png" border="0" usemap="#agroup__helpers_gad2bea3d45682bbf307d24ef29c7eb95b_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__helpers_gad2bea3d45682bbf307d24ef29c7eb95b_icgraph" id="agroup__helpers_gad2bea3d45682bbf307d24ef29c7eb95b_icgraph">
<area shape="rect" title="Checks if a tool is already installed and handles PATH adjustments if necessary." alt="" coords="257,29,376,56"/>
<area shape="rect" href="group__exec.html#gaa28cf299b0777fb57b91dcfb68c5d65d" title="Executes a user&#45;specified command by resolving it from the JSON configuration." alt="" coords="103,29,209,56"/>
<area shape="poly" title=" " alt="" coords="241,45,209,45,209,40,241,40"/>
<area shape="poly" title=" " alt="" coords="176,16,169,10,156,8,143,10,137,14,135,20,138,28,133,30,130,21,132,11,141,5,156,3,171,5,180,12"/>
<area shape="rect" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Entry point for the DevCLI tool." alt="" coords="5,29,55,56"/>
<area shape="poly" title=" " alt="" coords="87,45,55,45,55,40,87,40"/>
</map>
</div>

</div>
</div>
<a id="ga16e77a02e99d1690106464d9962cf0eb" name="ga16e77a02e99d1690106464d9962cf0eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16e77a02e99d1690106464d9962cf0eb">&#9670;&#160;</a></span>isAdmin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isAdmin </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the current process has administrative privileges. </p>
<p>This function determines if the current shell session is running with administrator rights. It uses Windows Security APIs to check membership in the Administrators group.</p>
<p>The result influences the installation behavior:</p><ul>
<li><b>Admin shell</b> → Use Chocolatey (<span class="tt">choco</span>) for installations.</li>
<li><b>Non-admin shell</b> → Use Scoop for installations.</li>
</ul>
<p>The function is relevant only on Windows and is typically called when handling <span class="tt">install.*</span> commands. On Linux platforms, this function is not used.</p>
<dl class="section return"><dt>Returns</dt><dd>bool <span class="tt">true</span> if the current process has administrative privileges, <span class="tt">false</span> otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Uses <span class="tt">AllocateAndInitializeSid</span> and <span class="tt">CheckTokenMembership</span> internally.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Altering privilege-check logic or skipping this step may cause incorrect installation command selection.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#ga16e77a02e99d1690106464d9962cf0eb">isAdmin</a>()) {</div>
<div class="line">    <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Admin privileges detected. Using Chocolatey for installation.&quot;</span>);</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Non-admin shell detected. Using Scoop for installation.&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__helpers_html_ga16e77a02e99d1690106464d9962cf0eb"><div class="ttname"><a href="#ga16e77a02e99d1690106464d9962cf0eb">isAdmin</a></div><div class="ttdeci">bool isAdmin()</div><div class="ttdoc">Checks whether the current process has administrative privileges.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00565">main.c:565</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00565">565</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  565</span>               {</div>
<div class="line"><span class="lineno">  566</span>        BOOL <a class="code hl_function" href="#ga16e77a02e99d1690106464d9962cf0eb">isAdmin</a> = FALSE;</div>
<div class="line"><span class="lineno">  567</span>        PSID adminGroup = NULL;</div>
<div class="line"><span class="lineno">  568</span>        SID_IDENTIFIER_AUTHORITY NtAuthority = SECURITY_NT_AUTHORITY;</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>        <span class="keywordflow">if</span> (AllocateAndInitializeSid(</div>
<div class="line"><span class="lineno">  571</span>                &amp;NtAuthority,</div>
<div class="line"><span class="lineno">  572</span>                2,</div>
<div class="line"><span class="lineno">  573</span>                SECURITY_BUILTIN_DOMAIN_RID,</div>
<div class="line"><span class="lineno">  574</span>                DOMAIN_ALIAS_RID_ADMINS,</div>
<div class="line"><span class="lineno">  575</span>                0, 0, 0, 0, 0, 0,</div>
<div class="line"><span class="lineno">  576</span>                &amp;adminGroup)) {</div>
<div class="line"><span class="lineno">  577</span> </div>
<div class="line"><span class="lineno">  578</span>            <span class="keywordflow">if</span> (!CheckTokenMembership(NULL, adminGroup, &amp;<a class="code hl_function" href="#ga16e77a02e99d1690106464d9962cf0eb">isAdmin</a>)) {</div>
<div class="line"><span class="lineno">  579</span>                <a class="code hl_function" href="#ga16e77a02e99d1690106464d9962cf0eb">isAdmin</a> = FALSE;</div>
<div class="line"><span class="lineno">  580</span>            }</div>
<div class="line"><span class="lineno">  581</span>            FreeSid(adminGroup);</div>
<div class="line"><span class="lineno">  582</span>        }</div>
<div class="line"><span class="lineno">  583</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="#ga16e77a02e99d1690106464d9962cf0eb">isAdmin</a>;</div>
<div class="line"><span class="lineno">  584</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__helpers_ga16e77a02e99d1690106464d9962cf0eb_cgraph.png" border="0" usemap="#agroup__helpers_ga16e77a02e99d1690106464d9962cf0eb_cgraph" loading="lazy" alt=""/></div>
<map name="agroup__helpers_ga16e77a02e99d1690106464d9962cf0eb_cgraph" id="agroup__helpers_ga16e77a02e99d1690106464d9962cf0eb_cgraph">
<area shape="rect" title="Checks whether the current process has administrative privileges." alt="" coords="5,29,74,56"/>
<area shape="poly" title=" " alt="" coords="26,29,25,12,31,5,40,3,49,5,54,12,49,15,46,10,39,8,34,10,30,14,31,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__helpers_ga16e77a02e99d1690106464d9962cf0eb_icgraph.png" border="0" usemap="#agroup__helpers_ga16e77a02e99d1690106464d9962cf0eb_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__helpers_ga16e77a02e99d1690106464d9962cf0eb_icgraph" id="agroup__helpers_ga16e77a02e99d1690106464d9962cf0eb_icgraph">
<area shape="rect" title="Checks whether the current process has administrative privileges." alt="" coords="257,29,325,56"/>
<area shape="poly" title=" " alt="" coords="313,16,306,10,291,8,278,10,270,14,269,20,272,28,267,30,263,21,266,11,276,5,291,3,308,5,317,12"/>
<area shape="rect" href="group__exec.html#gaa28cf299b0777fb57b91dcfb68c5d65d" title="Executes a user&#45;specified command by resolving it from the JSON configuration." alt="" coords="103,29,209,56"/>
<area shape="poly" title=" " alt="" coords="241,45,209,45,209,40,241,40"/>
<area shape="poly" title=" " alt="" coords="176,16,169,10,156,8,143,10,137,14,135,20,138,28,133,30,130,21,132,11,141,5,156,3,171,5,180,12"/>
<area shape="rect" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Entry point for the DevCLI tool." alt="" coords="5,29,55,56"/>
<area shape="poly" title=" " alt="" coords="87,45,55,45,55,40,87,40"/>
</map>
</div>

</div>
</div>
<a id="gafa1c2b19990d1d340a6edc4fefcbd3e7" name="gafa1c2b19990d1d340a6edc4fefcbd3e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa1c2b19990d1d340a6edc4fefcbd3e7">&#9670;&#160;</a></span>replacePlaceholder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * replacePlaceholder </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>input</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>val</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Replaces placeholders in a command string with user-provided values. </p>
<p>This function searches for specific placeholders within a given command:</p><ul>
<li><span class="tt">{{path}}</span> → Prompts the user to enter a file path.</li>
<li><span class="tt">{{name}}</span> → Prompts the user to enter a name.</li>
</ul>
<p>For each occurrence of the placeholder, the function:</p><ol type="1">
<li>Prompts the user for input.</li>
<li>Replaces the placeholder with the entered value.</li>
<li>Continues until no more placeholders are found.</li>
</ol>
<p>If the user enters the placeholder text itself (e.g., <span class="tt">{{path}}</span>), the function interprets it as invalid and returns the original command (duplicated), leaving it unchanged.</p>
<p>The function allocates memory dynamically for the modified string. In the current implementation, this memory is freed later by the calling function (<span class="tt"><a class="el" href="group__exec.html#gaa28cf299b0777fb57b91dcfb68c5d65d" title="Executes a user-specified command by resolving it from the JSON configuration.">runCommands()</a></span>), so there is no memory leak risk unless the code is altered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>The original command string that may contain placeholders. </td></tr>
    <tr><td class="paramname">val</td><td>The placeholder token to replace (e.g., <span class="tt">{{path}}</span> or <span class="tt">{{name}}</span>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* A heap-allocated string with placeholders replaced, or a duplicate of the original string if no replacements were made or input was invalid. Returns <span class="tt">NULL</span> only if memory allocation fails during replacement.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function performs in-place replacement by creating temporary buffers and updating the string iteratively.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Altering memory management or placeholder handling logic without care may cause leaks or incorrect string processing.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="keywordtype">char</span> *cmd = <a class="code hl_function" href="#gafa1c2b19990d1d340a6edc4fefcbd3e7">replacePlaceholder</a>(<span class="stringliteral">&quot;copy {{path}} {{name}}&quot;</span>, <span class="stringliteral">&quot;{{path}}&quot;</span>);</div>
<div class="line"><span class="comment">// User enters a path, placeholder replaced.</span></div>
<div class="line">free(cmd); <span class="comment">// Freed later by current implementation logic</span></div>
<div class="ttc" id="agroup__helpers_html_gafa1c2b19990d1d340a6edc4fefcbd3e7"><div class="ttname"><a href="#gafa1c2b19990d1d340a6edc4fefcbd3e7">replacePlaceholder</a></div><div class="ttdeci">char * replacePlaceholder(char *input, char *val)</div><div class="ttdoc">Replaces placeholders in a command string with user-provided values.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00449">main.c:449</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00449">449</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  449</span>                                                 {</div>
<div class="line"><span class="lineno">  450</span>    <span class="keywordtype">char</span> *buffer;</div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordtype">char</span> *input_copy=strdup(input);</div>
<div class="line"><span class="lineno">  452</span>    <span class="keywordtype">char</span> *pos = strstr(input_copy, val);</div>
<div class="line"><span class="lineno">  453</span>    <span class="keywordflow">while</span>(pos!=NULL){</div>
<div class="line"><span class="lineno">  454</span>        <span class="keywordtype">char</span> value[100];</div>
<div class="line"><span class="lineno">  455</span>        <span class="keywordflow">if</span>(strcmp(val, <span class="stringliteral">&quot;{{path}}&quot;</span>) == 0){</div>
<div class="line"><span class="lineno">  456</span>            <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Enter the path: &quot;</span>);</div>
<div class="line"><span class="lineno">  457</span>            scanf(<span class="stringliteral">&quot;%99s&quot;</span>,value);</div>
<div class="line"><span class="lineno">  458</span>        }</div>
<div class="line"><span class="lineno">  459</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(val, <span class="stringliteral">&quot;{{name}}&quot;</span>) == 0){</div>
<div class="line"><span class="lineno">  460</span>            <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Enter the name: &quot;</span>);</div>
<div class="line"><span class="lineno">  461</span>            scanf(<span class="stringliteral">&quot;%99s&quot;</span>,value);</div>
<div class="line"><span class="lineno">  462</span>        }</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordtype">int</span> ch;</div>
<div class="line"><span class="lineno">  464</span>        <span class="keywordflow">while</span> ((ch = getchar()) != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; ch != EOF);</div>
<div class="line"><span class="lineno">  465</span>        <span class="keywordflow">if</span>(strcmp(value, val) == 0){</div>
<div class="line"><span class="lineno">  466</span>            <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Invalid path. Using Original command.&quot;</span>);</div>
<div class="line"><span class="lineno">  467</span>            free(input_copy);</div>
<div class="line"><span class="lineno">  468</span>            <span class="keywordflow">return</span> strdup(input);</div>
<div class="line"><span class="lineno">  469</span>        }</div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordtype">size_t</span> new_len=strlen(input_copy)-strlen(val)+strlen(value)+1;</div>
<div class="line"><span class="lineno">  471</span>        buffer = (<span class="keywordtype">char</span> *)malloc(new_len*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));</div>
<div class="line"><span class="lineno">  472</span>        <span class="keywordflow">if</span> (!buffer) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  473</span>        pos = strstr(input_copy, val);</div>
<div class="line"><span class="lineno">  474</span>        <span class="keywordtype">size_t</span> prefix_len = pos - input_copy;</div>
<div class="line"><span class="lineno">  475</span>        strncpy(buffer, input_copy, prefix_len);</div>
<div class="line"><span class="lineno">  476</span>        buffer[prefix_len] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  477</span>        strcat(buffer, value);</div>
<div class="line"><span class="lineno">  478</span>        strcat(buffer, pos + strlen(val));</div>
<div class="line"><span class="lineno">  479</span>        free(input_copy);</div>
<div class="line"><span class="lineno">  480</span>        input_copy = strdup(buffer);</div>
<div class="line"><span class="lineno">  481</span>        free(buffer);</div>
<div class="line"><span class="lineno">  482</span>        pos = strstr(input_copy, val);</div>
<div class="line"><span class="lineno">  483</span>    }</div>
<div class="line"><span class="lineno">  484</span>    <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Placeholder Replaced.&quot;</span>);</div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordflow">return</span> input_copy;</div>
<div class="line"><span class="lineno">  486</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__helpers_gafa1c2b19990d1d340a6edc4fefcbd3e7_icgraph.png" border="0" usemap="#agroup__helpers_gafa1c2b19990d1d340a6edc4fefcbd3e7_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__helpers_gafa1c2b19990d1d340a6edc4fefcbd3e7_icgraph" id="agroup__helpers_gafa1c2b19990d1d340a6edc4fefcbd3e7_icgraph">
<area shape="rect" title="Replaces placeholders in a command string with user&#45;provided values." alt="" coords="257,29,388,56"/>
<area shape="rect" href="group__exec.html#gaa28cf299b0777fb57b91dcfb68c5d65d" title="Executes a user&#45;specified command by resolving it from the JSON configuration." alt="" coords="103,29,209,56"/>
<area shape="poly" title=" " alt="" coords="241,45,209,45,209,40,241,40"/>
<area shape="poly" title=" " alt="" coords="176,16,169,10,156,8,143,10,137,14,135,20,138,28,133,30,130,21,132,11,141,5,156,3,171,5,180,12"/>
<area shape="rect" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Entry point for the DevCLI tool." alt="" coords="5,29,55,56"/>
<area shape="poly" title=" " alt="" coords="87,45,55,45,55,40,87,40"/>
</map>
</div>

</div>
</div>
<a id="ga408104dd64a2dd600c3927853484ddf7" name="ga408104dd64a2dd600c3927853484ddf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga408104dd64a2dd600c3927853484ddf7">&#9670;&#160;</a></span>slice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * slice </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>userInput</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>start</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>last</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extracts a substring from the given input string based on start and end indices. </p>
<p>Creates a new string by copying characters from <span class="tt">userInput</span> starting at index <span class="tt">start</span> and ending at index <span class="tt">last</span> (inclusive). The result is null-terminated and stored in dynamically allocated memory.</p>
<p>This function is used internally to split commands like <span class="tt">install.git</span> into separate components (<span class="tt">install</span> and <span class="tt">git</span>) for searching commands and dependencies in <span class="tt">tasks.json</span>.</p>
<p>In the current implementation, the function is always called with valid indices, so there is no risk of out-of-bounds access unless the code is modified incorrectly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userInput</td><td>The original string from which the slice will be taken. </td></tr>
    <tr><td class="paramname">start</td><td>The starting index (0-based) of the slice. </td></tr>
    <tr><td class="paramname">last</td><td>The ending index (0-based, inclusive) of the slice.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* A heap-allocated substring extracted from the input. In the current implementation, memory is freed later in the program.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes valid index values as provided by the program logic. It does not perform bounds checking internally.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Altering how this function is called or modifying the index logic without understanding the program may lead to undefined behavior.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="keywordtype">char</span> *part = <a class="code hl_function" href="#ga408104dd64a2dd600c3927853484ddf7">slice</a>(<span class="stringliteral">&quot;install.git&quot;</span>, 0, 6); <span class="comment">// &quot;install&quot;</span></div>
<div class="line"><span class="comment">// Used internally for command resolution</span></div>
<div class="line">free(part); <span class="comment">// Freed later by program logic</span></div>
<div class="ttc" id="agroup__helpers_html_ga408104dd64a2dd600c3927853484ddf7"><div class="ttname"><a href="#ga408104dd64a2dd600c3927853484ddf7">slice</a></div><div class="ttdeci">char * slice(char *userInput, int start, int last)</div><div class="ttdoc">Extracts a substring from the given input string based on start and end indices.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00396">main.c:396</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00396">396</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  396</span>                                                 {</div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordtype">int</span> length=((last+1)-start);</div>
<div class="line"><span class="lineno">  398</span>    <span class="keywordtype">char</span> *output=(<span class="keywordtype">char</span>*)malloc((length+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));</div>
<div class="line"><span class="lineno">  399</span>    <a class="code hl_define" href="main_8c.html#ad285b8d43b6e90320e33e7438e3e171b">LOG</a>(<span class="stringliteral">&quot;Slicing input from %d to %d&quot;</span>, start, last);</div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;length; i++){</div>
<div class="line"><span class="lineno">  401</span>        output[i]=userInput[start+i];</div>
<div class="line"><span class="lineno">  402</span>    }</div>
<div class="line"><span class="lineno">  403</span>    output[length]=<span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">return</span> output;</div>
<div class="line"><span class="lineno">  405</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__helpers_ga408104dd64a2dd600c3927853484ddf7_icgraph.png" border="0" usemap="#agroup__helpers_ga408104dd64a2dd600c3927853484ddf7_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__helpers_ga408104dd64a2dd600c3927853484ddf7_icgraph" id="agroup__helpers_ga408104dd64a2dd600c3927853484ddf7_icgraph">
<area shape="rect" title="Extracts a substring from the given input string based on start and end indices." alt="" coords="257,29,305,56"/>
<area shape="rect" href="group__exec.html#gaa28cf299b0777fb57b91dcfb68c5d65d" title="Executes a user&#45;specified command by resolving it from the JSON configuration." alt="" coords="103,29,209,56"/>
<area shape="poly" title=" " alt="" coords="241,45,210,45,210,40,241,40"/>
<area shape="poly" title=" " alt="" coords="176,16,169,10,156,8,143,10,137,14,135,20,138,28,133,30,130,21,132,11,141,5,156,3,171,5,180,12"/>
<area shape="rect" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Entry point for the DevCLI tool." alt="" coords="5,29,55,56"/>
<area shape="poly" title=" " alt="" coords="87,45,55,45,55,40,87,40"/>
</map>
</div>

</div>
</div>
<a id="ga65bed1849cdeaf1d034b119cebfa50ba" name="ga65bed1849cdeaf1d034b119cebfa50ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65bed1849cdeaf1d034b119cebfa50ba">&#9670;&#160;</a></span>wrap_for_shell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * wrap_for_shell </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>command</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wraps a command for execution based on the detected shell environment. </p>
<p>This function ensures that commands intended for PowerShell can still be executed using <span class="tt">system()</span>, which runs commands in CMD by default on Windows. If the detected shell is:</p><ul>
<li><b>PowerShell</b> → The command is wrapped as: <span class="tt">powershell -Command "&lt;original command&gt;"</span>.</li>
<li><b>CMD or Linux</b> → The command is returned unchanged (but duplicated).</li>
</ul>
<p>Memory for the wrapped (or duplicated) command is dynamically allocated. In the current implementation, this memory is freed later in the program, so there is no leak risk unless the logic is modified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>The original command string to wrap.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* A heap-allocated string containing the wrapped or original command. Returns <span class="tt">NULL</span> only if memory allocation fails.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function uses the global <span class="tt">shell</span> variable to determine which shell is active.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Altering memory handling or removing the wrapper logic without understanding system command behavior may cause execution failures or leaks.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="keywordtype">char</span> *cmd = <a class="code hl_function" href="#ga65bed1849cdeaf1d034b119cebfa50ba">wrap_for_shell</a>(<span class="stringliteral">&quot;Get-Process&quot;</span>);</div>
<div class="line">system(cmd);</div>
<div class="line">free(cmd); <span class="comment">// Freed later by program logic in current implementation</span></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00521">521</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  521</span>                                    {</div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordflow">if</span> (strcmp(<a class="code hl_variable" href="main_8c.html#a0ef51f737fa5267b269e1c1ae5133ff0">shell</a>, <span class="stringliteral">&quot;Powershell&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  523</span>        <span class="keywordtype">size_t</span> len = strlen(command) + 30;</div>
<div class="line"><span class="lineno">  524</span>        <span class="keywordtype">char</span> *wrapped = malloc(len);</div>
<div class="line"><span class="lineno">  525</span>        snprintf(wrapped, len, <span class="stringliteral">&quot;powershell -Command \&quot;%s\&quot;&quot;</span>, command);</div>
<div class="line"><span class="lineno">  526</span>        <span class="keywordflow">return</span> wrapped;</div>
<div class="line"><span class="lineno">  527</span>    }</div>
<div class="line"><span class="lineno">  528</span>    <span class="keywordflow">return</span> strdup(command);</div>
<div class="line"><span class="lineno">  529</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__helpers_ga65bed1849cdeaf1d034b119cebfa50ba_icgraph.png" border="0" usemap="#agroup__helpers_ga65bed1849cdeaf1d034b119cebfa50ba_icgraph" loading="lazy" alt=""/></div>
<map name="agroup__helpers_ga65bed1849cdeaf1d034b119cebfa50ba_icgraph" id="agroup__helpers_ga65bed1849cdeaf1d034b119cebfa50ba_icgraph">
<area shape="rect" title="Wraps a command for execution based on the detected shell environment." alt="" coords="424,31,530,57"/>
<area shape="rect" href="group__helpers.html#gad2bea3d45682bbf307d24ef29c7eb95b" title="Checks if a tool is already installed and handles PATH adjustments if necessary." alt="" coords="257,5,376,32"/>
<area shape="poly" title=" " alt="" coords="409,36,376,31,377,25,410,31"/>
<area shape="rect" href="group__exec.html#gaa28cf299b0777fb57b91dcfb68c5d65d" title="Executes a user&#45;specified command by resolving it from the JSON configuration." alt="" coords="103,31,209,57"/>
<area shape="poly" title=" " alt="" coords="409,47,210,47,210,41,409,41"/>
<area shape="poly" title=" " alt="" coords="242,33,210,38,209,33,241,28"/>
<area shape="poly" title=" " alt="" coords="176,17,169,12,156,9,143,11,137,16,135,22,138,29,133,31,130,22,132,13,141,6,156,4,171,7,180,13"/>
<area shape="rect" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Entry point for the DevCLI tool." alt="" coords="5,31,55,57"/>
<area shape="poly" title=" " alt="" coords="87,47,55,47,55,41,87,41"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
